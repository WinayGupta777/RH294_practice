2022-10-22 09:29:14,165 p=72292 u=student n=ansible | ERROR! the playbook: samba. could not be found
2022-10-22 09:29:16,492 p=72302 u=student n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/home/student/troubleshoot-playbook/samba.yml': line 8, column 30, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    install_state: installed
    random_var: This is colon: test
                             ^ here

2022-10-22 09:31:17,275 p=72390 u=student n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/student/troubleshoot-playbook/samba.yml': line 44, column 4, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


   - name: deliver samba config
   ^ here

2022-10-22 09:32:58,919 p=72446 u=student n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  found unacceptable key (unhashable type: 'AnsibleMapping')

The error appears to be in '/home/student/troubleshoot-playbook/samba.yml': line 14, column 15, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

      name: samba
      state: {{ install_state }}
              ^ here
We could be wrong, but this one looks like it might be an issue with
missing quotes. Always quote template expression brackets when they
start a value. For instance:

    with_items:
      - {{ foo }}

Should be written as:

    with_items:
      - "{{ foo }}"

2022-10-22 09:33:44,953 p=72471 u=student n=ansible | playbook: samba.yml
2022-10-22 09:34:00,096 p=72491 u=student n=ansible | PLAY [Install a samba server] **********************************************************************
2022-10-22 09:34:00,104 p=72491 u=student n=ansible | TASK [Gathering Facts] *****************************************************************************
2022-10-22 09:34:21,565 p=72491 u=student n=ansible | fatal: [servera.lab.exammple.com]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host servera.lab.exammple.com port 22: Connection timed out", "unreachable": true}
2022-10-22 09:34:21,566 p=72491 u=student n=ansible | PLAY RECAP *****************************************************************************************
2022-10-22 09:34:21,566 p=72491 u=student n=ansible | servera.lab.exammple.com   : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2022-10-22 09:36:46,930 p=72563 u=student n=ansible | ansible-playbook 2.9.15
  config file = /home/student/troubleshoot-playbook/ansible.cfg
  configured module search path = ['/home/student/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python3.6/site-packages/ansible
  executable location = /usr/bin/ansible-playbook
  python version = 3.6.8 (default, Mar 18 2021, 08:58:41) [GCC 8.4.1 20200928 (Red Hat 8.4.1-1)]
2022-10-22 09:36:46,930 p=72563 u=student n=ansible | Using /home/student/troubleshoot-playbook/ansible.cfg as config file
2022-10-22 09:36:46,931 p=72563 u=student n=ansible | setting up inventory plugins
2022-10-22 09:36:46,936 p=72563 u=student n=ansible | host_list declined parsing /home/student/troubleshoot-playbook/inventory as it did not pass its verify_file() method
2022-10-22 09:36:46,936 p=72563 u=student n=ansible | script declined parsing /home/student/troubleshoot-playbook/inventory as it did not pass its verify_file() method
2022-10-22 09:36:46,936 p=72563 u=student n=ansible | auto declined parsing /home/student/troubleshoot-playbook/inventory as it did not pass its verify_file() method
2022-10-22 09:36:46,939 p=72563 u=student n=ansible | Parsed /home/student/troubleshoot-playbook/inventory inventory source with ini plugin
2022-10-22 09:36:47,110 p=72563 u=student n=ansible | Loading callback plugin default of type stdout, v2.0 from /usr/lib/python3.6/site-packages/ansible/plugins/callback/default.py
2022-10-22 09:36:47,149 p=72563 u=student n=ansible | PLAYBOOK: samba.yml ********************************************************************************
2022-10-22 09:36:47,150 p=72563 u=student n=ansible | 1 plays in samba.yml
2022-10-22 09:36:47,152 p=72563 u=student n=ansible | PLAY [Install a samba server] **********************************************************************
2022-10-22 09:36:47,160 p=72563 u=student n=ansible | TASK [Gathering Facts] *****************************************************************************
2022-10-22 09:36:47,184 p=72569 u=student n=ansible | <servera.lab.exammple.com> ESTABLISH SSH CONNECTION FOR USER: devops
2022-10-22 09:36:47,185 p=72569 u=student n=ansible | <servera.lab.exammple.com> SSH: EXEC ssh -vvv -C -o ControlMaster=auto -o ControlPersist=60s -o KbdInteractiveAuthentication=no -o PreferredAuthentications=gssapi-with-mic,gssapi-keyex,hostbased,publickey -o PasswordAuthentication=no -o 'User="devops"' -o ConnectTimeout=10 -o ControlPath=/home/student/.ansible/cp/d4775f48c9 servera.lab.exammple.com '/bin/sh -c '"'"'echo ~devops && sleep 0'"'"''
2022-10-22 09:37:07,275 p=72569 u=student n=ansible | <servera.lab.exammple.com> (255, b'', b'OpenSSH_8.0p1, OpenSSL 1.1.1g FIPS  21 Apr 2020\r\ndebug1: Reading configuration data /home/student/.ssh/config\r\ndebug1: /home/student/.ssh/config line 1: Applying options for *\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/01-training.conf depth 0\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/01-training.conf\r\ndebug1: /etc/ssh/ssh_config.d/01-training.conf line 1: Applying options for *\r\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/05-redhat.conf depth 0\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf\r\ndebug2: checking match for \'final all\' host servera.lab.exammple.com originally servera.lab.exammple.com\r\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 3: not matched \'final\'\r\ndebug2: match not found\r\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 5: Including file /etc/crypto-policies/back-ends/openssh.config depth 1 (parse only)\r\ndebug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config\r\ndebug3: gss kex names ok: [gss-curve25519-sha256-,gss-nistp256-sha256-,gss-group14-sha256-,gss-group16-sha512-,gss-gex-sha1-,gss-group14-sha1-]\r\ndebug3: kex names ok: [curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1]\r\ndebug1: configuration requests final Match pass\r\ndebug1: re-parsing configuration\r\ndebug1: Reading configuration data /home/student/.ssh/config\r\ndebug1: /home/student/.ssh/config line 1: Applying options for *\r\ndebug2: add_identity_file: ignoring duplicate key ~/.ssh/lab_rsa\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/01-training.conf depth 0\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/01-training.conf\r\ndebug1: /etc/ssh/ssh_config.d/01-training.conf line 1: Applying options for *\r\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/05-redhat.conf depth 0\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf\r\ndebug2: checking match for \'final all\' host servera.lab.exammple.com originally servera.lab.exammple.com\r\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 3: matched \'final\'\r\ndebug2: match found\r\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 5: Including file /etc/crypto-policies/back-ends/openssh.config depth 1\r\ndebug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config\r\ndebug3: gss kex names ok: [gss-curve25519-sha256-,gss-nistp256-sha256-,gss-group14-sha256-,gss-group16-sha512-,gss-gex-sha1-,gss-group14-sha1-]\r\ndebug3: kex names ok: [curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1]\r\ndebug1: auto-mux: Trying existing master\r\ndebug1: Control socket "/home/student/.ansible/cp/d4775f48c9" does not exist\r\ndebug2: resolving "servera.lab.exammple.com" port 22\r\ndebug2: ssh_connect_direct\r\ndebug1: Connecting to servera.lab.exammple.com [34.205.242.146] port 22.\r\ndebug2: fd 4 setting O_NONBLOCK\r\ndebug1: connect to address 34.205.242.146 port 22: Connection timed out\r\ndebug1: Connecting to servera.lab.exammple.com [54.161.222.85] port 22.\r\ndebug2: fd 4 setting O_NONBLOCK\r\ndebug1: connect to address 54.161.222.85 port 22: Connection timed out\r\nssh: connect to host servera.lab.exammple.com port 22: Connection timed out\r\n')
2022-10-22 09:37:07,278 p=72563 u=student n=ansible | fatal: [servera.lab.exammple.com]: UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: OpenSSH_8.0p1, OpenSSL 1.1.1g FIPS  21 Apr 2020\r\ndebug1: Reading configuration data /home/student/.ssh/config\r\ndebug1: /home/student/.ssh/config line 1: Applying options for *\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/01-training.conf depth 0\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/01-training.conf\r\ndebug1: /etc/ssh/ssh_config.d/01-training.conf line 1: Applying options for *\r\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/05-redhat.conf depth 0\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf\r\ndebug2: checking match for 'final all' host servera.lab.exammple.com originally servera.lab.exammple.com\r\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 3: not matched 'final'\r\ndebug2: match not found\r\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 5: Including file /etc/crypto-policies/back-ends/openssh.config depth 1 (parse only)\r\ndebug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config\r\ndebug3: gss kex names ok: [gss-curve25519-sha256-,gss-nistp256-sha256-,gss-group14-sha256-,gss-group16-sha512-,gss-gex-sha1-,gss-group14-sha1-]\r\ndebug3: kex names ok: [curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1]\r\ndebug1: configuration requests final Match pass\r\ndebug1: re-parsing configuration\r\ndebug1: Reading configuration data /home/student/.ssh/config\r\ndebug1: /home/student/.ssh/config line 1: Applying options for *\r\ndebug2: add_identity_file: ignoring duplicate key ~/.ssh/lab_rsa\r\ndebug1: Reading configuration data /etc/ssh/ssh_config\r\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/01-training.conf depth 0\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/01-training.conf\r\ndebug1: /etc/ssh/ssh_config.d/01-training.conf line 1: Applying options for *\r\ndebug3: /etc/ssh/ssh_config line 52: Including file /etc/ssh/ssh_config.d/05-redhat.conf depth 0\r\ndebug1: Reading configuration data /etc/ssh/ssh_config.d/05-redhat.conf\r\ndebug2: checking match for 'final all' host servera.lab.exammple.com originally servera.lab.exammple.com\r\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 3: matched 'final'\r\ndebug2: match found\r\ndebug3: /etc/ssh/ssh_config.d/05-redhat.conf line 5: Including file /etc/crypto-policies/back-ends/openssh.config depth 1\r\ndebug1: Reading configuration data /etc/crypto-policies/back-ends/openssh.config\r\ndebug3: gss kex names ok: [gss-curve25519-sha256-,gss-nistp256-sha256-,gss-group14-sha256-,gss-group16-sha512-,gss-gex-sha1-,gss-group14-sha1-]\r\ndebug3: kex names ok: [curve25519-sha256,curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha256,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha1]\r\ndebug1: auto-mux: Trying existing master\r\ndebug1: Control socket \"/home/student/.ansible/cp/d4775f48c9\" does not exist\r\ndebug2: resolving \"servera.lab.exammple.com\" port 22\r\ndebug2: ssh_connect_direct\r\ndebug1: Connecting to servera.lab.exammple.com [34.205.242.146] port 22.\r\ndebug2: fd 4 setting O_NONBLOCK\r\ndebug1: connect to address 34.205.242.146 port 22: Connection timed out\r\ndebug1: Connecting to servera.lab.exammple.com [54.161.222.85] port 22.\r\ndebug2: fd 4 setting O_NONBLOCK\r\ndebug1: connect to address 54.161.222.85 port 22: Connection timed out\r\nssh: connect to host servera.lab.exammple.com port 22: Connection timed out",
    "unreachable": true
}
2022-10-22 09:37:07,279 p=72563 u=student n=ansible | PLAY RECAP *****************************************************************************************
2022-10-22 09:37:07,279 p=72563 u=student n=ansible | servera.lab.exammple.com   : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2022-10-22 09:38:26,169 p=72631 u=student n=ansible | PLAY [Install a samba server] **********************************************************************
2022-10-22 09:38:26,177 p=72631 u=student n=ansible | TASK [Gathering Facts] *****************************************************************************
2022-10-22 09:38:27,438 p=72631 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:38:27,447 p=72631 u=student n=ansible | TASK [install samba] *******************************************************************************
2022-10-22 09:38:30,466 p=72631 u=student n=ansible | changed: [servera.lab.example.com]
2022-10-22 09:38:30,476 p=72631 u=student n=ansible | TASK [install firewalld] ***************************************************************************
2022-10-22 09:38:31,916 p=72631 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:38:31,926 p=72631 u=student n=ansible | TASK [debug install_state variable] ****************************************************************
2022-10-22 09:38:31,969 p=72631 u=student n=ansible | ok: [servera.lab.example.com] => {
    "msg": "The state for the samba service is installed"
}
2022-10-22 09:38:31,979 p=72631 u=student n=ansible | TASK [start samba] *********************************************************************************
2022-10-22 09:38:33,375 p=72631 u=student n=ansible | changed: [servera.lab.example.com]
2022-10-22 09:38:33,384 p=72631 u=student n=ansible | TASK [start firewalld] *****************************************************************************
2022-10-22 09:38:33,869 p=72631 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:38:33,878 p=72631 u=student n=ansible | TASK [configure firewall for samba] ****************************************************************
2022-10-22 09:38:34,610 p=72631 u=student n=ansible | changed: [servera.lab.example.com]
2022-10-22 09:38:34,620 p=72631 u=student n=ansible | TASK [deliver samba config] ************************************************************************
2022-10-22 09:38:34,726 p=72631 u=student n=ansible | fatal: [servera.lab.example.com]: FAILED! => {"changed": false, "msg": "Could not find or access 'samba.j2'\nSearched in:\n\t/home/student/troubleshoot-playbook/templates/samba.j2\n\t/home/student/troubleshoot-playbook/samba.j2\n\t/home/student/troubleshoot-playbook/templates/samba.j2\n\t/home/student/troubleshoot-playbook/samba.j2 on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2022-10-22 09:38:34,727 p=72631 u=student n=ansible | PLAY RECAP *****************************************************************************************
2022-10-22 09:38:34,728 p=72631 u=student n=ansible | servera.lab.example.com    : ok=7    changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2022-10-22 09:40:00,503 p=72778 u=student n=ansible | PLAY [Install a samba server] **********************************************************************
2022-10-22 09:40:50,092 p=72778 u=student n=ansible | Perform task: TASK: Gathering Facts (N)o/(y)es/(c)ontinue: *****************************************
2022-10-22 09:40:50,096 p=72778 u=student n=ansible | TASK [Gathering Facts] *****************************************************************************
2022-10-22 09:40:51,349 p=72778 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:40:55,512 p=72778 u=student n=ansible | Perform task: TASK: install samba (N)o/(y)es/(c)ontinue: *******************************************
2022-10-22 09:40:55,521 p=72778 u=student n=ansible | TASK [install samba] *******************************************************************************
2022-10-22 09:40:57,062 p=72778 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:40:58,792 p=72778 u=student n=ansible | Perform task: TASK: install firewalld (N)o/(y)es/(c)ontinue: ***************************************
2022-10-22 09:40:58,802 p=72778 u=student n=ansible | TASK [install firewalld] ***************************************************************************
2022-10-22 09:41:00,166 p=72778 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:41:01,231 p=72778 u=student n=ansible | Perform task: TASK: debug install_state variable (N)o/(y)es/(c)ontinue: ****************************
2022-10-22 09:41:01,241 p=72778 u=student n=ansible | TASK [debug install_state variable] ****************************************************************
2022-10-22 09:41:01,279 p=72778 u=student n=ansible | ok: [servera.lab.example.com] => {
    "msg": "The state for the samba service is installed"
}
2022-10-22 09:41:02,962 p=72778 u=student n=ansible | Perform task: TASK: start samba (N)o/(y)es/(c)ontinue: *********************************************
2022-10-22 09:41:02,972 p=72778 u=student n=ansible | TASK [start samba] *********************************************************************************
2022-10-22 09:41:03,719 p=72778 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:41:05,051 p=72778 u=student n=ansible | Perform task: TASK: start firewalld (N)o/(y)es/(c)ontinue: *****************************************
2022-10-22 09:41:05,060 p=72778 u=student n=ansible | TASK [start firewalld] *****************************************************************************
2022-10-22 09:41:05,562 p=72778 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:41:07,231 p=72778 u=student n=ansible | Perform task: TASK: configure firewall for samba (N)o/(y)es/(c)ontinue: ****************************
2022-10-22 09:41:07,240 p=72778 u=student n=ansible | TASK [configure firewall for samba] ****************************************************************
2022-10-22 09:41:07,873 p=72778 u=student n=ansible | ok: [servera.lab.example.com]
2022-10-22 09:41:09,312 p=72778 u=student n=ansible | Perform task: TASK: deliver samba config (N)o/(y)es/(c)ontinue: ************************************
2022-10-22 09:41:09,321 p=72778 u=student n=ansible | TASK [deliver samba config] ************************************************************************
2022-10-22 09:41:10,187 p=72778 u=student n=ansible | changed: [servera.lab.example.com]
2022-10-22 09:41:10,188 p=72778 u=student n=ansible | PLAY RECAP *****************************************************************************************
2022-10-22 09:41:10,188 p=72778 u=student n=ansible | servera.lab.example.com    : ok=8    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
